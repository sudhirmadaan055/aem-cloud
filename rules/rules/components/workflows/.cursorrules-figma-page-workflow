**ЁЯЪи MANDATORY: ALWAYS read `rules/rules/components/workflows/.cursorrules-figma-common` FIRST** - **NO EXCEPTIONS**

## ЁЯЪи CRITICAL: STEP 1 - MANDATORY COMPONENT TYPE DETECTION (AI Reference Only)

**тЪая╕П CRITICAL: BEFORE DISPLAYING ANALYSIS TABLE, ALWAYS PERFORM COMPONENT TYPE DETECTION:**

1. **ЁЯЪи MANDATORY: Read `rules/rules/components/analysis/.cursorrules-design-analysis-interactive` FIRST** - **NO EXCEPTIONS**
2. **ЁЯЪи MANDATORY: Analyze Figma data for navigation controls** - Look for arrows, dots, pagination, search boxes
3. **ЁЯЪи MANDATORY: Detect carousel elements** - Multiple slides, navigation arrows, slide indicators
4. **ЁЯЪи MANDATORY: Detect listing elements** - Search boxes, filters, pagination, sorting controls
5. **ЁЯЪи MANDATORY: Detect visual elements** - Decorative illustrations, background images, icons, graphics
6. **ЁЯЪи MANDATORY: Classify component type using interactive analysis rules** - Follow exact classification criteria
7. **ЁЯЪи MANDATORY: Determine complexity based on component type** - Carousel=Medium, Listing=High, Static=Simple
8. **ЁЯЪи MANDATORY: Identify interactive elements** - Buttons, navigation controls, form elements
9. **ЁЯЪи MANDATORY: Identify visual elements** - Decorative images, icons, graphics that need dialog fields

**ЁЯЪи MANDATORY: COMPONENT TYPE DETECTION RULES - CRITICAL FOR ACCURACY**

#### **ЁЯЪи MANDATORY: CAROUSEL COMPONENT DETECTION**
**Carousel components have:**
- **Navigation arrows** (previous/next buttons, left/right arrows)
- **Navigation indicators** (dots, thumbnails, slide indicators)
- **Slide-based content** (multiple slides/panels with content)
- **Auto-play functionality** (automatic slide transitions)
- **Touch/swipe support** (mobile gesture support)
- **Static content** (pre-configured slides, no dynamic queries)

#### **ЁЯЪи MANDATORY: LISTING COMPONENT DETECTION**
**Listing components have:**
- **Search functionality** (search input fields, search buttons)
- **Filter controls** (dropdown filters, checkbox filters, tag filters)
- **Sorting options** (sort dropdowns, sort buttons)
- **Pagination controls** (page numbers, "Load More" buttons)
- **Dynamic content loading** (AJAX requests, infinite scroll)
- **Database/repository queries** (Query Builder, JCR queries)

**ЁЯЪи MANDATORY: CHECK FOR EXISTING COMPONENTS (AI Reference Only)**

1. **ЁЯЪи MANDATORY: Search existing AEM components** - Use `codebase_search` to find similar components
2. **ЁЯЪи MANDATORY: Check component names** - Look for exact matches or similar naming patterns
3. **ЁЯЪи MANDATORY: Compare functionality** - Match component types and interactive elements
4. **ЁЯЪи MANDATORY: Identify existing vs new** - Categorize components as existing, modified, or new

**ЁЯЪи MANDATORY: DISPLAY COMPONENT ANALYSIS TABLE - REQUIRED FORMAT:**

```
**Component Analysis:**

| # | Component Name | Type | Complexity | Interactive Elements | Visual Elements |
|---|----------------|------|------------|---------------------|-----------------|
| 1 | [Component Name 1] | [Type] | [Complexity] | [Interactive Elements] | [Visual Elements] |
| 2 | [Component Name 2] | [Type] | [Complexity] | [Interactive Elements] | [Visual Elements] |
| 3 | [Component Name 3] | [Type] | [Complexity] | [Interactive Elements] | [Visual Elements] |
| ... | ... | ... | ... | ... | ... |
| X | [Component Name X] | [Type] | [Complexity] | [Interactive Elements] | [Visual Elements] |

**Component Count:** X distinct components identified in the Figma file

**Existing Components (X):**
- [Component Name] - [Reason for match]

**Modified Components (X):**
- [Component Name] - [What needs modification]

**New Components (X):**
- [Component Name]

**Summary by Type:**
- **[Type] Components (X):** [Component Name 1], [Component Name 2]

**Summary by Complexity:**
- **[Complexity] (X):** [Component Name 1], [Component Name 2]

**Visual Elements Detected:**
- **Decorative Illustrations:** [Count] - [Description]
- **Background Images:** [Count] - [Description]
- **Icon Elements:** [Count] - [Description]
- **Asset References:** [Count] - [Description]
```

**ЁЯЪи MANDATORY: PAGE DESIGN DETECTION RULES:**
- **ЁЯЪи MANDATORY: Look for multiple breakpoints** - Desktop, Mobile, Tablet frames in same file
- **ЁЯЪи MANDATORY: Identify page-level components** - Header, Footer, Hero, Content sections
- **ЁЯЪи MANDATORY: Check for component instances** - Multiple instances of same component type
- **ЁЯЪи MANDATORY: Analyze component hierarchy** - Parent-child relationships in page structure
- **ЁЯЪи MANDATORY: Separate by functionality** - Navigation, Content, Interactive, Layout components

**ЁЯЪи CRITICAL: This format MUST be used for ALL Figma analysis presentations - NO EXCEPTIONS**

**ЁЯЪи MANDATORY: ALWAYS SHOW OPTIONS AFTER ANALYSIS - NO EXCEPTIONS**
**тЪая╕П CRITICAL: After showing the analysis format, ALWAYS immediately show these options:**

```
### 1. **Create Component Definition** - Generate components.json file
### 2. **Create Components** - Generate AEM component files
### 3. **Modify Analysis** - Adjust component details
### 4. **Cancel** - Return to main menu
```

**ЁЯЪи CRITICAL: ALL TECHNICAL DETAILS MARKED AS (AI Reference Only) - NO EXCEPTIONS**

**ЁЯЪи CRITICAL: THIS STEP DETERMINES COMPONENT STRUCTURE - NO EXCEPTIONS**

## ЁЯЪи CRITICAL: STEP 2 - AEM COMPONENT MAPPING (AI Reference Only)

**тЪая╕П CRITICAL: MAP FIGMA COMPONENTS TO AEM COMPONENTS:**
1. **ЁЯЪи MANDATORY: Check existing AEM project components** - Scan existing component directory
2. **ЁЯЪи MANDATORY: Compare with existing components** - Match visual similarity to existing AEM components
3. **ЁЯЪи MANDATORY: Determine component naming** - Create AEM-compliant component names
4. **ЁЯЪи MANDATORY: Map component hierarchy** - Define parent-child component relationships
5. **ЁЯЪи MANDATORY: Identify component dependencies** - Find components that depend on others
6. **ЁЯЪи MANDATORY: Plan component structure** - Define HTL, Sling Model, dialog requirements
7. **ЁЯЪи MANDATORY: Map design system integration** - Plan how to use extracted design tokens