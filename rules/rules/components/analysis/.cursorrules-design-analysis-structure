# AEM Design Analysis - Component Structure & Detection

## ğŸš¨ MANDATORY: Component Detection & Structure Analysis

### **ğŸš¨ MANDATORY: STEP 0 - DETERMINE INPUT TYPE AND COMPONENT STRUCTURE - NO EXCEPTIONS**

**âš ï¸ CRITICAL: FOR FIGMA URLS - EXTRACT AND ANALYZE FIGMA DATA:**
1. **ğŸš¨ MANDATORY: Parse Figma URL** - Extract file key and node ID
2. **ğŸš¨ MANDATORY: Connect to Figma MCP** - Use `mcp_figma_get_figma_data` tool
3. **ğŸš¨ MANDATORY: Extract complete file data** - Get all components, metadata, and structure
4. **ğŸš¨ MANDATORY: Analyze component hierarchy** - Identify main components and variants
5. **ğŸš¨ MANDATORY: Extract design system** - Get colors, typography, spacing, effects
6. **ğŸš¨ MANDATORY: Identify text content** - Extract all text for default values
7. **ğŸš¨ MANDATORY: Map visual elements** - Identify containers, images, buttons, text
8. **ğŸš¨ MANDATORY: Determine component count** - Count unique components to create
9. **ğŸš¨ MANDATORY: Use actual Figma component names** - Extract exact component names, titles, and headings from Figma data
10. **ğŸš¨ MANDATORY: Never create generic names** - Always use the actual text content from Figma for component identification

### **ğŸš¨ MANDATORY: STEP 0 - DETERMINE IMAGE AND COMPONENT STRUCTURE - NO EXCEPTIONS**

**âš ï¸ CRITICAL: BEFORE ANY OTHER STEP, ALWAYS DETERMINE STRUCTURE FIRST:**

1. **ğŸš¨ MANDATORY: Count uploaded images** - Determine if single image or multiple images
2. **ğŸš¨ MANDATORY: Analyze each image individually** - Examine each design image separately
3. **ğŸš¨ MANDATORY: Count components per image** - Identify component count in each image
4. **ğŸš¨ MANDATORY: TRIPLE-CHECK COMPONENT COUNT** - Count THREE times to ensure no components are missed
5. **ğŸš¨ MANDATORY: Verify footer components** - Check for separate footer sections (main footer + copyright footer)
6. **ğŸš¨ MANDATORY: Verify header components** - Check for separate header sections if applicable
7. **ğŸš¨ MANDATORY: Count ALL visual sections** - Every distinct visual area must be counted as a component
8. **ğŸš¨ MANDATORY: Identify component variations** - Look for multiple variations of the same component type
9. **ğŸš¨ MANDATORY: Check for hidden components** - Look for components that might be partially visible or in different states
10. **ğŸš¨ MANDATORY: Verify component separation** - Ensure each component is truly distinct and separate
11. **ğŸš¨ MANDATORY: Extract actual titles and headings when available** - Use exact titles, headings, and section names from image content
12. **ğŸš¨ MANDATORY: Create descriptive names for components without titles** - Based on function and visual appearance
13. **ğŸš¨ MANDATORY: Never create generic names** - Always use meaningful, descriptive names
14. **ğŸš¨ MANDATORY: Recognize unified sections with sub-content blocks** - Sections with main title and multiple content blocks are single components
15. **ğŸš¨ MANDATORY: Count by visual boundaries, not sub-headings** - One background = one component, regardless of internal content blocks
16. **ğŸš¨ MANDATORY: UNIFIED SECTION COMPONENT RULES - NO EXCEPTIONS**:
    - **Single Background Color** = Single Component (regardless of internal content blocks)
    - **Single Main Title** = Single Component (even with multiple sub-sections)
    - **Connected Content Blocks** = Single Component (hero + cards, banner + grid, etc.)
    - **Same Visual Container** = Single Component (all content within same visual boundary)
    - **NEVER split unified sections** - Always treat as one component when content is visually connected
16. **ğŸš¨ MANDATORY: Determine processing scenario:**
    - **Scenario 1**: Single image with single component â†’ Process as one component
    - **Scenario 2**: Single image with multiple components â†’ Process each section as separate component
    - **Scenario 3**: Multiple images with single component each â†’ Process each image as one component
    - **Scenario 4**: Multiple images with multiple components each â†’ Process each section in each image as separate component
17. **ğŸš¨ MANDATORY: Display structure summary** - Show "Processing X images with Y total components"

### **ğŸš¨ MANDATORY: SYSTEMATIC COMPONENT DETECTION PROTOCOL - ZERO TOLERANCE FOR MISSING COMPONENTS**

**âš ï¸ CRITICAL: FOLLOW THIS EXACT SEQUENCE TO PREVENT MISSING COMPONENTS - NO EXCEPTIONS:**

#### **ğŸš¨ MANDATORY: Phase 1 - Visual Section Identification**
1. **ğŸš¨ MANDATORY: Scan image from top to bottom** - Examine every pixel of the image systematically
2. **ğŸš¨ MANDATORY: Identify background color changes** - Every background change indicates a new component
3. **ğŸš¨ MANDATORY: Identify layout boundaries** - Every clear horizontal/vertical division is a component
4. **ğŸš¨ MANDATORY: Identify content type changes** - Different content patterns indicate separate components
5. **ğŸš¨ MANDATORY: Identify spacing gaps** - Significant white space between sections indicates component separation

#### **ğŸš¨ MANDATORY: Phase 2 - Component Type Detection**
1. **ğŸš¨ MANDATORY: Look for Listing Components FIRST** - Search boxes, filters, pagination, sorting (PRIMARY DETECTION)
2. **ğŸš¨ MANDATORY: Look for Carousel Components** - Multiple slides, navigation indicators, carousel controls
3. **ğŸš¨ MANDATORY: Look for Header Components** - Navigation bars, logos, menu items
4. **ğŸš¨ MANDATORY: Look for Hero Banners** - Large images with overlay text
5. **ğŸš¨ MANDATORY: Look for Video Components** - Video players, play buttons, video thumbnails, "Watch Video" buttons
6. **ğŸš¨ MANDATORY: Look for Content Grids** - Card layouts, product grids, image galleries
7. **ğŸš¨ MANDATORY: Look for Text Sections** - Paragraph blocks, story sections
8. **ğŸš¨ MANDATORY: Look for Call-to-Action** - Buttons, forms, subscription areas
9. **ğŸš¨ MANDATORY: Look for Footer Components** - Links, social media, copyright (check for multiple footer sections)

#### **ğŸš¨ MANDATORY: Phase 3 - Component Variation Detection**
1. **ğŸš¨ MANDATORY: Identify Hero Banner Variations** - Different text, images, or layouts
2. **ğŸš¨ MANDATORY: Identify Video Hero Sections** - Video players with play buttons
3. **ğŸš¨ MANDATORY: Identify Carousel Components** - Multiple slides with navigation indicators
4. **ğŸš¨ MANDATORY: Identify Footer Variations** - Top band (brand statement) + Bottom band (copyright/links)
5. **ğŸš¨ MANDATORY: Identify Interactive Elements** - Buttons, controls, navigation elements

#### **ğŸš¨ MANDATORY: Phase 4 - Triple Verification Process**
1. **ğŸš¨ MANDATORY: First Count** - Count all components using Phase 1-3 results
2. **ğŸš¨ MANDATORY: Second Count** - Re-count using different method (bottom to top)
3. **ğŸš¨ MANDATORY: Third Count** - Re-count using component type checklist
4. **ğŸš¨ MANDATORY: Verify counts match** - All three counts MUST be identical
5. **ğŸš¨ MANDATORY: If counts don't match** - Repeat entire process until counts match

### **ğŸš¨ MANDATORY: STEP 1 - COMPONENT IDENTIFICATION - NO EXCEPTIONS**

**âš ï¸ CRITICAL: FOR CONSISTENCY, ALWAYS TREAT ALL COMPONENTS AS NEW:**

1. **ğŸš¨ MANDATORY: Identify all visual components** - Extract all distinct components from design
2. **ğŸš¨ MANDATORY: Count total components** - Determine exact number of components identified
3. **ğŸš¨ MANDATORY: Categorize as New Components** - All components are treated as new for consistency
4. **ğŸš¨ MANDATORY: Display Status Summary** - Show Existing (0), Modified (0), New (X)
5. **ğŸš¨ MANDATORY: Process All Components** - Apply 13-step analysis to all identified components

### **ğŸš¨ MANDATORY: STEP 2: Pattern Analysis - REQUIRED FIRST (BEFORE ALL OTHERS)**
1. **ğŸš¨ MANDATORY: LISTING COMPONENT DETECTION FIRST** - Check for search, filters, pagination, sorting (PRIMARY CLASSIFICATION)
2. **ğŸš¨ MANDATORY: CAROUSEL COMPONENT DETECTION** - Check for multiple slides, navigation indicators, carousel controls
3. **ğŸš¨ MANDATORY: Identify component type** - Tab Navigation, Listing, Form, Content Display, etc.
4. **ğŸš¨ MANDATORY: Determine primary interaction** - Click tabs, search/filter, form input, scroll, etc.
5. **ğŸš¨ MANDATORY: Identify content organization** - Tabs, grid, list, single content, etc.
6. **ğŸš¨ MANDATORY: Determine framework required** - Standard component, Listing framework, Form framework, etc.

### **ğŸš¨ MANDATORY: STEP 3: Complexity Analysis - REQUIRED SECOND**
1. **ğŸš¨ MANDATORY: Determine complexity level** - Simple, Medium, High
2. **ğŸš¨ MANDATORY: Provide reasoning** - Why this complexity level (static content, filtering, API calls, etc.)
3. **ğŸš¨ MANDATORY: Identify architecture requirements** - Sling Model only, OSGi services, clientlibs, etc.
4. **ğŸš¨ MANDATORY: Determine review requirements** - None, Standard, Architect review needed

### **ğŸš¨ MANDATORY: STEP 4: Functional Analysis - REQUIRED THIRD**
1. **ğŸš¨ MANDATORY: Identify core functionality** - What does this component actually DO?
2. **ğŸš¨ MANDATORY: Identify user interactions** - Click, filter, search, navigate, submit, etc.
3. **ğŸš¨ MANDATORY: Determine data flow** - Static content, dynamic content, user input, API calls
4. **ğŸš¨ MANDATORY: Identify business logic** - Simple display, filtering logic, validation, calculations

### **ğŸš¨ MANDATORY: STEP 5: Layout Structure Analysis - REQUIRED FOURTH**
1. **ğŸš¨ MANDATORY: Identify overall layout pattern** - Single column, two column, grid, etc.
2. **ğŸš¨ MANDATORY: Map section positioning** - Which content goes where (left, right, top, bottom)
3. **ğŸš¨ MANDATORY: Identify column ratios** - 1/3 + 2/3, 1/2 + 1/2, etc.
4. **ğŸš¨ MANDATORY: Plan HTML container structure** - Main container, sections, subsections
5. **ğŸš¨ MANDATORY: Plan CSS layout strategy** - Grid, flexbox, positioning method
